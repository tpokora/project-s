CREATE DATABASE USERS_DATABASE;

USE USERS_DATABASE;

CREATE TABLE USER (
  ID INT(11) NOT NULL AUTO_INCREMENT,
  USERNAME VARCHAR(45) COLLATE UTF8_POLISH_CI NOT NULL,
  PASSWORD VARCHAR(64) COLLATE UTF8_POLISH_CI NOT NULL,
  EMAIL VARCHAR(255) COLLATE UTF8_POLISH_CI NOT NULL,
  ROLE VARCHAR(45) COLLATE UTF8_POLISH_CI DEFAULT 'ROLE_USER',
  PRIMARY KEY (ID),
  UNIQUE KEY USERNAME_UNIQUE (USERNAME),
  UNIQUE KEY EMAIL_UNIQUE (EMAIL)
) ENGINE=INNODB AUTO_INCREMENT=1000 DEFAULT CHARSET=UTF8 COLLATE=UTF8_POLISH_CI;


INSERT INTO USER(USERNAME, PASSWORD, EMAIL, ROLE)
    VALUES ('admin', '$2a$10$RiDTA930W5o8lpeNbQc1/.1jDubtN7gLDmzUR4OrhMob8BDuW54J6', 'email@email.com', 'ROLE_ADMIN');

CREATE TABLE ARTICLE (
	ID INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TITLE VARCHAR(64) NOT NULL COLLATE UTF8_POLISH_CI,
    ARTICLE BLOB NOT NULL,
    CREATE_TIME DATETIME NOT NULL DEFAULT NOW(),
    USER_ID INT(11) NOT NULL,
    FOREIGN KEY (USER_ID)
		REFERENCES USER (ID)
        ON DELETE CASCADE
        ON UPDATE CASCADE
) ENGINE=INNODB AUTO_INCREMENT=1000 DEFAULT CHARSET=UTF8 COLLATE=UTF8_POLISH_CI;

CREATE TABLE TODO (
	ID INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
    CONTENT VARCHAR(128) COLLATE UTF8_POLISH_CI NOT NULL,
    CHECKED TINYINT(1) NOT NULL DEFAULT 0,
    DATE DATETIME NOT NULL DEFAULT NOW(),
    USER_ID INT(11) NOT NULL,
        FOREIGN KEY (USER_ID)
    		REFERENCES USER (ID)
            ON DELETE CASCADE
            ON UPDATE CASCADE
) ENGINE=INNODB AUTO_INCREMENT=1000 DEFAULT CHARSET=UTF8 COLLATE=UTF8_POLISH_CI;
